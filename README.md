# Homerentals

**Homerentals** — это учебное back-end-приложение на Django, демонстрирующее базовую функциональность сервиса по аренде жилья. Проект предоставляет как API, так и HTML-интерфейс для управления объектами недвижимости, бронированиями и учётными записями.

## Возможности

### Управление объявлениями
- создание, редактирование и удаление объектов недвижимости владельцами;
- переключение статуса активности (активно/неактивно);
- настройка периода доступности или отметка «доступно всегда».
- отдельные страницы каталога для арендаторов и личного кабинета арендодателя;
- автоматическая валидация дат доступности и стоимости при сохранении;
- обновление окон доступности после подтверждения бронирований.

### Поиск и фильтры
- поиск по названию и описанию объявлений с простым сравнением строк;
- фильтрация по цене, городу, типу жилья, количеству спальных мест и периоду доступности;
- сортировка по дате публикации или цене.
- алгоритм нечеткого поиска позволяет находить объявления при неполном совпадении строк;
- интерактивные формы фильтрации с ползунком диапазона цен и выбором дат;
- отображение количества найденных объявлений и активных фильтров.

### Бронирование
- оформление брони на выбранные даты;
- подтверждение или отклонение заявок арендодателями;
- просмотр текущих и завершённых бронирований;
- автоматическое завершение просроченных бронирований.
- изменение статуса брони (pending/confirmed/declined/canceled/finished);
- защита от пересечения дат с уже подтверждёнными бронями;
- отдельные страницы для просмотра ожиданий и истории бронирований.

### Рейтинги и отзывы
- после завершения брони арендатор может оставить отзыв и оценку;
- просмотр всех отзывов по объекту.
- возможность редактировать и удалять собственные отзывы через API.

### Аутентификация и роли
- регистрация и вход по e‑mail/паролю;
- роли **user** и **landlord** с разграничением прав;
- отдельные страницы для арендаторов и арендодателей.
- вход по имени пользователя или e‑mail благодаря собственному backend;
- выдача токенов для доступа к API;
- административная панель Django для управления всеми объектами.

### Автоматические обновления
- автоматическая ежедневная смена дат доступности;
- middleware переводит устаревшие объекты и бронирования в статус «неактивно»;

---

## Требования

- Python 3.11+
- MySQL‑сервер

Необходимые библиотеки указаны в [`requirements.txt`](requirements.txt).

## Установка

1. Создайте и активируйте виртуальное окружение:

```bash
python -m venv venv
source venv/bin/activate
```

2. Установите зависимости:

```bash
pip install -r requirements.txt
```

3. Подготовьте файл `.env` в корне проекта. Минимальный набор переменных:

```
DJANGO_SECRET_KEY=change_me
DEBUG=True
DB_NAME=homerentals_db
DB_USER=root
DB_PASSWORD=your_pass
DB_HOST=127.0.0.1
DB_PORT=3306
```

4. Примените миграции и создайте суперпользователя:

```bash
python manage.py migrate
python manage.py createsuperuser
```

5. Запустите сервер разработки:

```bash
python manage.py runserver
```

## Использование

- HTML-страницы авторизации и регистрации: `/auth/`.
- Список и поиск объявлений: `/property/user/`.
- Кабинет арендодателя: `/property/landlord/`.
- Личный список бронирований: `/api/bookings/my-html/`.
- REST API размещено под префиксом `/api/` (см. `urls.py`).

### Основные эндпоинты API
- `POST /api/bookings/` — создание брони;
- `GET  /api/bookings/my/` — список собственных броней;
- `GET  /api/bookings/pending/` — заявки на бронирование для арендодателя;
- `GET/PUT /api/bookings/<id>/` — информация и изменение статуса бронирования;
- `POST /api/reviews/` и `GET /api/reviews/property/<property_id>/` — отзывы;
- `POST /api/register/` и `POST /api/login/` — регистрация и получение токена.

Для заполнения демонстрационными данными можно использовать скрипты `create_mass_users.py` и `create_mass_properties.py`.

---

## Спасибо за внимание :)
Проект создан исключительно в образовательных целях и может служить отправной точкой для дальнейшего развития системы аренды жилья.